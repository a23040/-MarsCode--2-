# -MarsCode--2-
# 2徒步旅行中的补给问题

### 关键词

双端队列（deque），单调队列，滑动窗口

### 问题描述

小R正在计划一次从地点A到地点B的徒步旅行，总路程需要 `N` 天。为了在旅途中保持充足的能量，小R每天必须消耗1份食物。幸运的是，小R在路途中每天都会经过一个补给站，可以先购买完食物后再消耗今天的1份食物。然而，每个补给站的食物每份的价格可能不同，并且小R在购买完食物后最多只能同时携带 `K` 份食物。

现在，小R希望在保证每天食物消耗的前提下，以最小的花费完成这次徒步旅行。你能帮助小R计算出最低的花费是多少吗？

**输入 **

- `n` 总路程需要的天数
- `k` 小R最多能同时携带食物的份数
- `data[i]` 第i天补给站每份食物的价格

**输出 **

- 返回完成这次徒步旅行的最小花费

**约束条件 **

- `1` < `n,k` < `1000`
- `1` < `data[i]` < `10000`

------

### 测试样例

***样例1：***

> 输入：`n = 5 ,k = 2 ,data = [1, 2, 3, 3, 2]`
> 输出：`9`

***样例2：***

> 输入：`n = 6 ,k = 3 ,data = [4, 1, 5, 2, 1, 3]`
> 输出：`9`

***样例3：***

> 输入：`n = 4 ,k = 1 ,data = [3, 2, 4, 1]`
> 输出：`10`








### AI 点评

这道题目综合运用了双端队列（deque）数据结构和单调队列算法知识，是一道典型的动态规划与滑动窗口结合的问题，适合练习数据结构与算法综合应用的同学。

### 思路说明

题目要求在给定的天数 `N` 和最大携带食物量 `K` 的限制下，计算出完成徒步旅行所需的最小花费。每天经过的补给站食物价格不同，且每天必须消耗1份食物。我们可以通过维护一个单调递增的双端队列来记录当前窗口内的最小价格，从而在每次购买食物时选择最便宜的选项。通过滑动窗口的方式，逐步计算出每天的最小花费，最终得到总的最小花费。

### 解题过程

1. **初始化**：创建一个双端队列 `mins` 用于存储当前窗口内的最小价格及其对应的天数。初始化结果 `result` 为0。

2. 遍历每一天

   ：

   - **维护单调队列**：在每次遍历中，首先检查队列 `mins` 的末尾元素，如果其价格大于当前天的价格，则将其弹出，直到队列为空或队列末尾元素的价格小于等于当前天的价格。然后将当前天的价格和天数加入队列。
   - **滑动窗口**：检查队列 `mins` 的头部元素，如果其对应的天数已经不在当前窗口内（即 `mins[0][0] <= j - k`），则将其弹出。
   - **计算花费**：将当前窗口内的最小价格（即队列头部元素的价格）累加到 `result` 中。

   

3. **返回结果**：遍历结束后，`result` 即为完成徒步旅行的最小花费。

### 复杂度分析

- **时间复杂度**：O(N)，其中 N 是天数。我们只需要遍历每一天，并且在每次遍历中，队列的插入和删除操作都是 O(1) 的时间复杂度。
- **空间复杂度**：O(K)，其中 K 是最大携带食物量。我们使用了一个双端队列来存储当前窗口内的最小价格，其最大长度为 K。

### 知识点扩展

- **双端队列（deque）**：双端队列是一种允许在两端进行插入和删除操作的队列。在本题中，我们使用双端队列来维护当前窗口内的最小价格，通过在队列两端进行操作，可以高效地维护单调性。
- **单调队列**：单调队列是一种特殊的队列，其内部元素保持单调递增或单调递减的顺序。在本题中，我们使用单调递增队列来记录当前窗口内的最小价格，从而在每次购买食物时选择最便宜的选项。
- **滑动窗口**：滑动窗口是一种常见的算法技巧，用于在数组或列表中维护一个固定大小的窗口，并对其进行操作。在本题中，我们通过滑动窗口的方式，逐步计算出每天的最小花费。



### 代码说明

双端队列mins中每个元素是一个list=[第i天，第i天的食物价格]。当天第j天与前面的第i天比较。每考虑加入1个元素，考虑2个while，保证价格单调，且都有效

两个while，第一个while：当天第j天，与前一天第j-1天的价格比较，若第j-1天的价格贵，则移除它（尾部元素）。保证队列价格从小到大排列。

两个while，第二个while：i<=j-k,则哪怕第i天的价格便宜，但是不能供给到第j天，所以也要移除（popleft头部元素）


